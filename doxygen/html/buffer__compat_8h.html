<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>libevent: event2/buffer_compat.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>event2/buffer_compat.h File Reference</h1>
<p>Obsolete and deprecated versions of the functions in <a class="el" href="buffer_8h.html" title="Functions for buffering data for network sending or receiving.">buffer.h</a>: provided only for backward compatibility.  
<a href="#_details">More...</a></p>

<p><a href="buffer__compat_8h_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1c57a451c56dc1483a1c8aaeb9b92cc6"></a><!-- doxytag: member="buffer_compat.h::EVBUFFER_DATA" ref="a1c57a451c56dc1483a1c8aaeb9b92cc6" args="(x)" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="buffer__compat_8h.html#a1c57a451c56dc1483a1c8aaeb9b92cc6">EVBUFFER_DATA</a>(x)&nbsp;&nbsp;&nbsp;evbuffer_pullup((x), -1)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">deprecated in favor of calling the functions directly <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab8d9564980e380cf1887f2be70f687ad"></a><!-- doxytag: member="buffer_compat.h::EVBUFFER_LENGTH" ref="ab8d9564980e380cf1887f2be70f687ad" args="(x)" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="buffer__compat_8h.html#ab8d9564980e380cf1887f2be70f687ad">EVBUFFER_LENGTH</a>(x)&nbsp;&nbsp;&nbsp;evbuffer_get_length(x)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">deprecated in favor of calling the functions directly <br/></td></tr>
<tr><td colspan="2"><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef void(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="buffer__compat_8h.html#a613068ef7e1be05deead9c9b6f021158">evbuffer_cb</a> )(struct <a class="el" href="structevbuffer.html">evbuffer</a> *buffer, size_t old_len, size_t new_len, void *arg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Type definition for a callback that is invoked whenever data is added or removed from an <a class="el" href="structevbuffer.html" title="An evbuffer is an opaque data type for efficiently buffering data to be sent or received...">evbuffer</a>.  <a href="#a613068ef7e1be05deead9c9b6f021158"></a><br/></td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="buffer__compat_8h.html#adb7851f684bf8400ce7b26e06e30c2d3">evbuffer_find</a> (struct <a class="el" href="structevbuffer.html">evbuffer</a> *buffer, const unsigned char *what, size_t len)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Find a string within an <a class="el" href="structevbuffer.html" title="An evbuffer is an opaque data type for efficiently buffering data to be sent or received...">evbuffer</a>.  <a href="#adb7851f684bf8400ce7b26e06e30c2d3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="buffer__compat_8h.html#a65177a5ae259100c90f3f4c2812db070">evbuffer_readline</a> (struct <a class="el" href="structevbuffer.html">evbuffer</a> *buffer)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Obsolete alias for evbuffer_readln(buffer, NULL, EOL_STYLE_ANY).  <a href="#a65177a5ae259100c90f3f4c2812db070"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="buffer__compat_8h.html#a410c80ef25950aed88a08141278f23ab">evbuffer_setcb</a> (struct <a class="el" href="structevbuffer.html">evbuffer</a> *buffer, <a class="el" href="buffer__compat_8h.html#a613068ef7e1be05deead9c9b6f021158">evbuffer_cb</a> cb, void *cbarg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Replace all callbacks on an <a class="el" href="structevbuffer.html" title="An evbuffer is an opaque data type for efficiently buffering data to be sent or received...">evbuffer</a> with a single new callback, or remove them.  <a href="#a410c80ef25950aed88a08141278f23ab"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Obsolete and deprecated versions of the functions in <a class="el" href="buffer_8h.html" title="Functions for buffering data for network sending or receiving.">buffer.h</a>: provided only for backward compatibility. </p>
<hr/><h2>Typedef Documentation</h2>
<a class="anchor" id="a613068ef7e1be05deead9c9b6f021158"></a><!-- doxytag: member="buffer_compat.h::evbuffer_cb" ref="a613068ef7e1be05deead9c9b6f021158" args=")(struct evbuffer *buffer, size_t old_len, size_t new_len, void *arg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* <a class="el" href="buffer__compat_8h.html#a613068ef7e1be05deead9c9b6f021158">evbuffer_cb</a>)(struct <a class="el" href="structevbuffer.html">evbuffer</a> *buffer, size_t old_len, size_t new_len, void *arg)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Type definition for a callback that is invoked whenever data is added or removed from an <a class="el" href="structevbuffer.html" title="An evbuffer is an opaque data type for efficiently buffering data to be sent or received...">evbuffer</a>. </p>
<p>An <a class="el" href="structevbuffer.html" title="An evbuffer is an opaque data type for efficiently buffering data to be sent or received...">evbuffer</a> may have one or more callbacks set at a time. The order in which they are executed is undefined.</p>
<p>A callback function may add more callbacks, or remove itself from the list of callbacks, or add or remove data from the buffer. It may not remove another callback from the list.</p>
<p>If a callback adds or removes data from the buffer or from another buffer, this can cause a recursive invocation of your callback or other callbacks. If you ask for an infinite loop, you might just get one: watch out!</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>buffer</em>&nbsp;</td><td>the buffer whose size has changed </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>old_len</em>&nbsp;</td><td>the previous length of the buffer </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>new_len</em>&nbsp;</td><td>the current length of the buffer </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>arg</em>&nbsp;</td><td>a pointer to user data </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="adb7851f684bf8400ce7b26e06e30c2d3"></a><!-- doxytag: member="buffer_compat.h::evbuffer_find" ref="adb7851f684bf8400ce7b26e06e30c2d3" args="(struct evbuffer *buffer, const unsigned char *what, size_t len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char* evbuffer_find </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structevbuffer.html">evbuffer</a> *&nbsp;</td>
          <td class="paramname"> <em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned char *&nbsp;</td>
          <td class="paramname"> <em>what</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Find a string within an <a class="el" href="structevbuffer.html" title="An evbuffer is an opaque data type for efficiently buffering data to be sent or received...">evbuffer</a>. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>buffer</em>&nbsp;</td><td>the <a class="el" href="structevbuffer.html" title="An evbuffer is an opaque data type for efficiently buffering data to be sent or received...">evbuffer</a> to be searched </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>what</em>&nbsp;</td><td>the string to be searched for </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>len</em>&nbsp;</td><td>the length of the search string </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>a pointer to the beginning of the search string, or NULL if the search failed. </dd></dl>

</div>
</div>
<a class="anchor" id="a65177a5ae259100c90f3f4c2812db070"></a><!-- doxytag: member="buffer_compat.h::evbuffer_readline" ref="a65177a5ae259100c90f3f4c2812db070" args="(struct evbuffer *buffer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* evbuffer_readline </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structevbuffer.html">evbuffer</a> *&nbsp;</td>
          <td class="paramname"> <em>buffer</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Obsolete alias for evbuffer_readln(buffer, NULL, EOL_STYLE_ANY). </p>
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000001">Deprecated:</a></b></dt><dd>This function is deprecated because its behavior is not correct for almost any protocol, and also because it's wholly subsumed by <a class="el" href="buffer_8h.html#ae2460b5060948d3233342c4c81888650" title="Read a single line from an evbuffer.">evbuffer_readln()</a>.</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>buffer</em>&nbsp;</td><td>the <a class="el" href="structevbuffer.html" title="An evbuffer is an opaque data type for efficiently buffering data to be sent or received...">evbuffer</a> to read from </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>pointer to a single line, or NULL if an error occurred </dd></dl>

</div>
</div>
<a class="anchor" id="a410c80ef25950aed88a08141278f23ab"></a><!-- doxytag: member="buffer_compat.h::evbuffer_setcb" ref="a410c80ef25950aed88a08141278f23ab" args="(struct evbuffer *buffer, evbuffer_cb cb, void *cbarg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void evbuffer_setcb </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structevbuffer.html">evbuffer</a> *&nbsp;</td>
          <td class="paramname"> <em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="buffer__compat_8h.html#a613068ef7e1be05deead9c9b6f021158">evbuffer_cb</a>&nbsp;</td>
          <td class="paramname"> <em>cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>cbarg</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Replace all callbacks on an <a class="el" href="structevbuffer.html" title="An evbuffer is an opaque data type for efficiently buffering data to be sent or received...">evbuffer</a> with a single new callback, or remove them. </p>
<p>Subsequent calls to <a class="el" href="buffer__compat_8h.html#a410c80ef25950aed88a08141278f23ab" title="Replace all callbacks on an evbuffer with a single new callback, or remove them.">evbuffer_setcb()</a> replace callbacks set by previous calls. Setting the callback to NULL removes any previously set callback.</p>
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000002">Deprecated:</a></b></dt><dd>This function is deprecated because it clears all previous callbacks set on the <a class="el" href="structevbuffer.html" title="An evbuffer is an opaque data type for efficiently buffering data to be sent or received...">evbuffer</a>, which can cause confusing behavior if multiple parts of the code all want to add their own callbacks on a buffer. Instead, use <a class="el" href="buffer_8h.html#a69c3b8893a49bdd919642c6920c1fcb4" title="Append data to the end of an evbuffer.">evbuffer_add()</a>, evbuffer_del(), and evbuffer_setflags() to manage your own <a class="el" href="structevbuffer.html" title="An evbuffer is an opaque data type for efficiently buffering data to be sent or received...">evbuffer</a> callbacks without interfering with callbacks set by others.</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>buffer</em>&nbsp;</td><td>the <a class="el" href="structevbuffer.html" title="An evbuffer is an opaque data type for efficiently buffering data to be sent or received...">evbuffer</a> to be monitored </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>cb</em>&nbsp;</td><td>the callback function to invoke when the <a class="el" href="structevbuffer.html" title="An evbuffer is an opaque data type for efficiently buffering data to be sent or received...">evbuffer</a> is modified, or NULL to remove all callbacks. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>cbarg</em>&nbsp;</td><td>an argument to be provided to the callback function </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"/><address style="text-align: right;"><small>Generated on 17 Mar 2015 for libevent by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
