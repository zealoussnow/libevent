<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>libevent: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li class="current"><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>libevent Documentation</h1><h2><a class="anchor" id="intro">
Introduction</a></h2>
<p>Libevent is an <a class="el" href="structevent.html" title="Structure to represent a single event.">event</a> notification library for developing scalable network servers. The Libevent API provides a mechanism to execute a callback function when a specific <a class="el" href="structevent.html" title="Structure to represent a single event.">event</a> occurs on a file descriptor or after a timeout has been reached. Furthermore, Libevent also support callbacks due to signals or regular timeouts.</p>
<p>Libevent is meant to replace the <a class="el" href="structevent.html" title="Structure to represent a single event.">event</a> loop found in <a class="el" href="structevent.html" title="Structure to represent a single event.">event</a> driven network servers. An application just needs to call <a class="el" href="event__compat_8h.html#a1f4991bceb8aaf33545d1fc857230b51" title="Loop to process events.">event_dispatch()</a> and then add or remove events dynamically without having to change the <a class="el" href="structevent.html" title="Structure to represent a single event.">event</a> loop.</p>
<p>Currently, Libevent supports /dev/poll, kqueue(2), select(2), poll(2), epoll(4), and evports. The internal <a class="el" href="structevent.html" title="Structure to represent a single event.">event</a> mechanism is completely independent of the exposed <a class="el" href="structevent.html" title="Structure to represent a single event.">event</a> API, and a simple update of Libevent can provide new functionality without having to redesign the applications. As a result, Libevent allows for portable application development and provides the most scalable <a class="el" href="structevent.html" title="Structure to represent a single event.">event</a> notification mechanism available on an operating system. Libevent can also be used for multithreaded programs. Libevent should compile on Linux, *BSD, Mac OS X, Solaris and, Windows.</p>
<h2><a class="anchor" id="usage">
Standard usage</a></h2>
<p>Every program that uses Libevent must inclurde the &lt;<a class="el" href="event_8h.html" title="Core functions for waiting for and receiving events, and using event bases.">event2/event.h</a>&gt; header, and pass the -levent flag to the linker. (You can instead link -levent_core if you only want the main <a class="el" href="structevent.html" title="Structure to represent a single event.">event</a> and buffered IO-based code, and don't want to link any protocol code.)</p>
<h2><a class="anchor" id="setup">
Library setup</a></h2>
<p>Before you call any other Libevent functions, you need to set up the library. If you're going to use Libevent from multiple threads in a multithreaded application, you need to initialize thread support -- typically by using <a class="el" href="thread_8h.html#a6b2f9d2502cbf13063f5bfe0c3c8ff73" title="Sets up Libevent for use with Pthreads locking and thread ID functions.">evthread_use_pthreads()</a> or <a class="el" href="thread_8h.html#ae6227c318642f9af248897bab1a0aa58" title="Sets up Libevent for use with Windows builtin locking and thread ID functions.">evthread_use_windows_threads()</a>. See &lt;<a class="el" href="thread_8h.html" title="Functions for multi-threaded applications using Libevent.">event2/thread.h</a>&gt; for more information.</p>
<p>This is also the point where you can replace Libevent's memory management functions with event_set_mem_functions, and enable debug mode with <a class="el" href="event_8h.html#a3472400b8b1802550df2242673a6da37" title="Enable some relatively expensive debugging checks in Libevent that would normally...">event_enable_debug_mode()</a>.</p>
<h2><a class="anchor" id="base">
Creating an event base</a></h2>
<p>Next, you need to create an <a class="el" href="structevent__base.html" title="Structure to hold information and state for a Libevent dispatch loop.">event_base</a> structure, using <a class="el" href="event_8h.html#a4c16f1203aebc67f94791ae0240b7353" title="Create and return a new event_base to use with the rest of Libevent.">event_base_new()</a> or <a class="el" href="event_8h.html#a444afb106c45ba296d847417a3a1ef04" title="Initialize the event API.">event_base_new_with_config()</a>. The <a class="el" href="structevent__base.html" title="Structure to hold information and state for a Libevent dispatch loop.">event_base</a> is responsible for keeping track of which events are "pending" (that is to say, being watched to see if they become active) and which events are "active". Every <a class="el" href="structevent.html" title="Structure to represent a single event.">event</a> is associated with a single <a class="el" href="structevent__base.html" title="Structure to hold information and state for a Libevent dispatch loop.">event_base</a>.</p>
<h2><a class="anchor" id="event">
Event notification</a></h2>
<p>For each file descriptor that you wish to monitor, you must create an <a class="el" href="structevent.html" title="Structure to represent a single event.">event</a> structure with <a class="el" href="event_8h.html#ab9a66f828d205eda84b321e32014cbbd" title="Allocate and asssign a new event structure, ready to be added.">event_new()</a>. (You may also declare an <a class="el" href="structevent.html" title="Structure to represent a single event.">event</a> structure and call <a class="el" href="event_8h.html#afade5e4859dee5b85d502e5594a05cf0" title="Prepare a new, already-allocated event structure to be added.">event_assign()</a> to initialize the members of the structure.) To enable notification, you add the structure to the list of monitored events by calling <a class="el" href="event_8h.html#a44df7b40859b56f2c866adb02dabdd9e" title="Add an event to the set of pending events.">event_add()</a>. The <a class="el" href="structevent.html" title="Structure to represent a single event.">event</a> structure must remain allocated as long as it is active, so it should generally be allocated on the heap.</p>
<h2><a class="anchor" id="loop">
Dispaching evets.</a></h2>
<p>Finally, you call <a class="el" href="event_8h.html#a01e457364ed5216a8c7bc219033b946f" title="Event dispatching loop.">event_base_dispatch()</a> to loop and dispatch events. You can also use <a class="el" href="event_8h.html#ad712706e6a763b6662f0eb03b3d8cd80" title="Wait for events to become active, and run their callbacks.">event_base_loop()</a> for more fine-grained control.</p>
<p>Currently, only one thread can be dispatching a given <a class="el" href="structevent__base.html" title="Structure to hold information and state for a Libevent dispatch loop.">event_base</a> at a time. If you want to run events in multiple threads at once, you can either have a single <a class="el" href="structevent__base.html" title="Structure to hold information and state for a Libevent dispatch loop.">event_base</a> whose events add work to a work queue, or you can create multiple <a class="el" href="structevent__base.html" title="Structure to hold information and state for a Libevent dispatch loop.">event_base</a> objects.</p>
<h2><a class="anchor" id="bufferevent">
I/O Buffers</a></h2>
<p>Libevent provides a buffered I/O abstraction on top of the regular <a class="el" href="structevent.html" title="Structure to represent a single event.">event</a> callbacks. This abstraction is called a <a class="el" href="structbufferevent.html" title="An opaque type for handling buffered IO.">bufferevent</a>. A <a class="el" href="structbufferevent.html" title="An opaque type for handling buffered IO.">bufferevent</a> provides input and output buffers that get filled and drained automatically. The user of a buffered <a class="el" href="structevent.html" title="Structure to represent a single event.">event</a> no longer deals directly with the I/O, but instead is reading from input and writing to output buffers.</p>
<p>Once initialized via <a class="el" href="bufferevent_8h.html#a501557193aa56c9f4923583d9d734395" title="Create a new socket bufferevent over an existing socket.">bufferevent_socket_new()</a>, the <a class="el" href="structbufferevent.html" title="An opaque type for handling buffered IO.">bufferevent</a> structure can be used repeatedly with <a class="el" href="bufferevent_8h.html#a1b9a3412e8c8e122c745b33d46b9643e" title="Enable a bufferevent.">bufferevent_enable()</a> and <a class="el" href="bufferevent_8h.html#aa15582fe250247aa98d4897527215727" title="Disable a bufferevent.">bufferevent_disable()</a>. Instead of reading and writing directly to a socket, you would call <a class="el" href="bufferevent_8h.html#a6bd435529e20a39b24fead9ddcd966ba" title="Read data from a bufferevent buffer.">bufferevent_read()</a> and <a class="el" href="bufferevent_8h.html#abc606695cd6bb2e3f25c4330d0c9e3ab" title="Write data to a bufferevent buffer.">bufferevent_write()</a>.</p>
<p>When read enabled the <a class="el" href="structbufferevent.html" title="An opaque type for handling buffered IO.">bufferevent</a> will try to read from the file descriptor and call the read callback. The write callback is executed whenever the output buffer is drained below the write low watermark, which is 0 by default.</p>
<p>See &lt;event2/bufferevent*.h&gt; for more information.</p>
<h2><a class="anchor" id="timers">
Timers</a></h2>
<p>Libevent can also be used to create timers that invoke a callback after a certain amount of time has expired. The evtimer_new() function returns an <a class="el" href="structevent.html" title="Structure to represent a single event.">event</a> struct to use as a timer. To activate the timer, call evtimer_add(). Timers can be deactivated by calling evtimer_del().</p>
<h2><a class="anchor" id="evdns">
Asynchronous DNS resolution</a></h2>
<p>Libevent provides an asynchronous DNS resolver that should be used instead of the standard DNS resolver functions. See the &lt;<a class="el" href="dns_8h.html" title="Welcome, gentle reader.">event2/dns.h</a>&gt; functions for more detail.</p>
<h2><a class="anchor" id="evhttp">
Event-driven HTTP servers</a></h2>
<p>Libevent provides a very simple event-driven HTTP server that can be embedded in your program and used to service HTTP requests.</p>
<p>To use this capability, you need to include the &lt;<a class="el" href="http_8h.html" title="Basic support for HTTP serving.">event2/http.h</a>&gt; header in your program. See that header for more information.</p>
<h2><a class="anchor" id="evrpc">
A framework for RPC servers and clients</a></h2>
<p>Libevent provides a framework for creating RPC servers and clients. It takes care of marshaling and unmarshaling all data structures.</p>
<h2><a class="anchor" id="api">
API Reference</a></h2>
<p>To browse the complete documentation of the libevent API, click on any of the following links.</p>
<p><a class="el" href="event_8h.html" title="Core functions for waiting for and receiving events, and using event bases.">event2/event.h</a> The primary libevent header</p>
<p><a class="el" href="thread_8h.html" title="Functions for multi-threaded applications using Libevent.">event2/thread.h</a> Functions for use by multithreaded programs</p>
<p><a class="el" href="buffer_8h.html" title="Functions for buffering data for network sending or receiving.">event2/buffer.h</a> and <a class="el" href="bufferevent_8h.html" title="Functions for buffering data for network sending or receiving.">event2/bufferevent.h</a> Buffer management for network reading and writing</p>
<p><a class="el" href="util_8h.html" title="Common convenience functions for cross-platform portability and related socket manipulations...">event2/util.h</a> Utility functions for portable nonblocking network code</p>
<p><a class="el" href="dns_8h.html" title="Welcome, gentle reader.">event2/dns.h</a> Asynchronous DNS resolution</p>
<p><a class="el" href="http_8h.html" title="Basic support for HTTP serving.">event2/http.h</a> An embedded libevent-based HTTP server</p>
<p><a class="el" href="rpc_8h.html" title="This header files provides basic support for an RPC server and client.">event2/rpc.h</a> A framework for creating RPC servers and clients </p>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"/><address style="text-align: right;"><small>Generated on 17 Mar 2015 for libevent by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
